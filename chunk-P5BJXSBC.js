import{a as M,b as q}from"./chunk-6PWGB6GI.js";import{c as L,d as _,f as T,g as O,i as k,k as A,n as B,o as N,q as j,r as R}from"./chunk-W6K6ZW7Q.js";import{e as I,i as y,j as E,r as F,t as P}from"./chunk-SYLTFIY3.js";import{Fb as l,Gb as w,Nb as S,Ra as a,Sa as d,ca as b,e as x,fb as p,hb as s,mb as r,nb as n,ob as v,vb as h,wb as g,za as C}from"./chunk-OCE2AVGC.js";var f=x(R()),D=x(q());function V(t,u){t&1&&(r(0,"small"),l(1,"Email is required."),n())}function z(t,u){t&1&&(r(0,"small"),l(1,"Invalid email format."),n())}function G(t,u){if(t&1&&(r(0,"div",16),p(1,V,2,0,"small",17)(2,z,2,0,"small",17),n()),t&2){let e,i,o=g();a(),s("ngIf",(e=o.loginForm.get("email"))==null?null:e.hasError("required")),a(),s("ngIf",(i=o.loginForm.get("email"))==null?null:i.hasError("email"))}}function Y(t,u){t&1&&(r(0,"small"),l(1,"Password is required."),n())}function H(t,u){if(t&1&&(r(0,"div",16),p(1,Y,2,0,"small",17),n()),t&2){let e,i=g();a(),s("ngIf",(e=i.loginForm.get("password"))==null?null:e.hasError("required"))}}function J(t,u){if(t&1&&(r(0,"p",18),l(1),n()),t&2){let e=g();a(),w(e.errorMessage)}}var oe=(()=>{class t{constructor(e,i,o,m,c){this._AuthService=e,this._Router=i,this._fb=o,this.route=m,this.platformId=c,this.errorMessage=""}ngOnInit(){E(this.platformId)&&D.default.init(),this.loginForm=this._fb.group({email:["",[_.required,_.email]],password:["",_.required]})}login(){if(this.loginForm.invalid){this.errorMessage="INVALID Data";return}let e=this.loginForm.value;this._AuthService.login(e).subscribe({next:i=>{console.log(i),localStorage.setItem("token",i.token),this._Router.navigate(["/dash"])},error:i=>{console.error(i),f.default.fire({icon:"error",title:"Oops...",text:"Incorrect email or password!"})}})}resetPassword(){f.default.fire({title:"Forgot Password?",text:"Please enter your email to reset your password.",input:"email",inputPlaceholder:"Enter your email address",showCancelButton:!0,cancelButtonText:"Cancel",confirmButtonText:"Send Reset Link",inputValidator:e=>e?/\S+@\S+\.\S+/.test(e)?null:"Please enter a valid email address!":"You need to enter an email address!",customClass:{popup:"custom-popup",title:"custom-title",confirmButton:"custom-confirm-btn",cancelButton:"custom-cancel-btn"}}).then(e=>{if(e.isConfirmed&&e.value){let i=e.value;this._AuthService.resetPassword(i).subscribe({next:o=>{f.default.fire({icon:"success",title:"Check your email",text:o||"A password reset link has been sent to your email address.",customClass:{popup:"custom-popup-success",title:"custom-title-success",confirmButton:"custom-confirm-btn-success"}})},error:o=>{console.log(o),f.default.fire({icon:"error",title:"Error",text:"There was an issue sending the reset email. Please try again later.",customClass:{popup:"custom-popup-error",title:"custom-title-error",confirmButton:"custom-confirm-btn-error"}})}})}})}static{this.\u0275fac=function(i){return new(i||t)(d(M),d(P),d(N),d(F),d(C))}}static{this.\u0275cmp=b({type:t,selectors:[["app-login"]],standalone:!0,features:[S],decls:25,vars:5,consts:[[1,"mt-5","mb-5"],[1,"container"],["id","form-log"],[3,"ngSubmit","formGroup"],[1,"text-center"],[1,"col-md-6","m-auto","mt-3"],["for","email",1,"form-label"],["type","email","id","email","placeholder","test@gmail.com","formControlName","email",1,"form-control"],["class","text-danger",4,"ngIf"],["for","password",1,"form-label"],["type","password","id","password","placeholder","*******","formControlName","password",1,"form-control"],[1,"text-center","mt-3"],["href","javascript:void(0);",3,"click"],[1,"btns","d-flex","justify-content-center","mt-4"],["type","submit",1,"btn","bg-danger","w-50",3,"disabled"],["class","text-danger mt-3",4,"ngIf"],[1,"text-danger"],[4,"ngIf"],[1,"text-danger","mt-3"]],template:function(i,o){if(i&1&&(r(0,"section",0)(1,"div",1)(2,"div",2)(3,"form",3),h("ngSubmit",function(){return o.login()}),r(4,"h4",4),l(5,"Sign in to account"),n(),r(6,"p",4),l(7,"Enter your email & password to login"),n(),r(8,"div",5)(9,"label",6),l(10,"Email Address"),n(),v(11,"input",7),p(12,G,3,2,"div",8),n(),r(13,"div",5)(14,"label",9),l(15,"Password"),n(),v(16,"input",10),p(17,H,2,1,"div",8),n(),r(18,"div",11)(19,"a",12),h("click",function(){return o.resetPassword()}),l(20,"Forgot password?"),n()(),r(21,"div",13)(22,"button",14),l(23," Sign In "),n()(),p(24,J,2,1,"p",15),n()()()()),i&2){let m,c;a(3),s("formGroup",o.loginForm),a(9),s("ngIf",((m=o.loginForm.get("email"))==null?null:m.invalid)&&((m=o.loginForm.get("email"))==null?null:m.touched)),a(5),s("ngIf",((c=o.loginForm.get("password"))==null?null:c.invalid)&&((c=o.loginForm.get("password"))==null?null:c.touched)),a(5),s("disabled",o.loginForm.invalid),a(2),s("ngIf",o.errorMessage)}},dependencies:[j,k,L,T,O,A,B,y,I],styles:["#form-log[_ngcontent-%COMP%]{padding:20px;border-radius:10px;-webkit-box-shadow:0 0 37px rgba(8,21,66,.05);box-shadow:0 0 37px #0815420d;margin:0 auto;background-color:#fff}h4[_ngcontent-%COMP%]{color:#051a1a;font-size:20px;line-height:24px;font-weight:600}p[_ngcontent-%COMP%]{color:#898989;font-size:14px;line-height:24px;font-weight:400}label[_ngcontent-%COMP%], a[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{font-size:14px;line-height:21px;font-weight:500;color:#051a1a}a[_ngcontent-%COMP%]{color:#dc1f28}.btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#dc1f28;color:#fff;font-size:18px}"]})}}return t})();export{oe as LoginComponent};
